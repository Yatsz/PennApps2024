import React from 'react'
import { useAlert } from '../context/AlertContext'

interface AlertCardProps {
  id: number
  camera_num: number
  floor: string
  severity: 'HIGH' | 'MEDIUM' | 'LOW'
  time_ago: string
  frame: string
}

const severityConfig = {
  HIGH: { 
    textColor: 'text-[#FF1313]',
    bgColor: 'bg-[#FFD4D4]',
    borderColor: 'border-[#FF1313]',
    width: 'w-[43px]',
    Icon: HighSeverityIcon 
  },
  MEDIUM: { 
    textColor: 'text-[#FF8C00]',
    bgColor: 'bg-[#FFDFC4]',
    borderColor: 'border-[#FF8C00]',
    width: 'w-[61px]',
    Icon: MediumSeverityIcon 
  },
  LOW: { 
    textColor: 'text-[#E4D141]',
    bgColor: 'bg-[#FFFBD9]',
    borderColor: 'border-[#E4D141]',
    width: 'w-[40px]',
    Icon: LowSeverityIcon 
  },
}

function HighSeverityIcon() {
  return (
    <svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14.6237 1.43506L25.4162 20.1276C25.5808 20.4126 25.6674 20.7359 25.6674 21.065C25.6674 21.3942 25.5808 21.7175 25.4162 22.0025C25.2517 22.2876 25.015 22.5243 24.73 22.6888C24.4449 22.8534 24.1216 22.94 23.7925 22.9401H2.20747C1.87834 22.94 1.55502 22.8534 1.26999 22.6888C0.984959 22.5243 0.74827 22.2876 0.58371 22.0025C0.41915 21.7175 0.332517 21.3942 0.33252 21.065C0.332522 20.7359 0.419158 20.4126 0.583722 20.1276L11.3762 1.43506C12.0975 0.185059 13.9012 0.185059 14.6237 1.43506ZM13 16.2501C12.6685 16.2501 12.3505 16.3818 12.1161 16.6162C11.8817 16.8506 11.75 17.1685 11.75 17.5001C11.75 17.8316 11.8817 18.1495 12.1161 18.3839C12.3505 18.6184 12.6685 18.7501 13 18.7501C13.3315 18.7501 13.6494 18.6184 13.8839 18.3839C14.1183 18.1495 14.25 17.8316 14.25 17.5001C14.25 17.1685 14.1183 16.8506 13.8839 16.6162C13.6494 16.3818 13.3315 16.2501 13 16.2501ZM13 7.50006C12.6938 7.5001 12.3983 7.6125 12.1695 7.81595C11.9407 8.0194 11.7945 8.29975 11.7587 8.60381L11.75 8.75006V13.7501C11.7503 14.0687 11.8723 14.3751 12.091 14.6068C12.3097 14.8384 12.6087 14.9779 12.9267 14.9965C13.2448 15.0152 13.5579 14.9117 13.8023 14.7072C14.0466 14.5027 14.2036 14.2127 14.2412 13.8963L14.25 13.7501V8.75006C14.25 8.41854 14.1183 8.1006 13.8839 7.86618C13.6494 7.63176 13.3315 7.50006 13 7.50006Z" fill="#FF1313"/>
    </svg>
  )
}

function MediumSeverityIcon() {
  return (
    <svg width="26" height="25" viewBox="0 0 26 25" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M13 25C6.09625 25 0.5 19.4037 0.5 12.5C0.5 5.59625 6.09625 0 13 0C19.9037 0 25.5 5.59625 25.5 12.5C25.5 19.4037 19.9037 25 13 25ZM13 22.5C15.6522 22.5 18.1957 21.4464 20.0711 19.5711C21.9464 17.6957 23 15.1522 23 12.5C23 9.84783 21.9464 7.3043 20.0711 5.42893C18.1957 3.55357 15.6522 2.5 13 2.5C10.3478 2.5 7.8043 3.55357 5.92893 5.42893C4.05357 7.3043 3 9.84783 3 12.5C3 15.1522 4.05357 17.6957 5.92893 19.5711C7.8043 21.4464 10.3478 22.5 13 22.5ZM13 6.25C13.3315 6.25 13.6495 6.3817 13.8839 6.61612C14.1183 6.85054 14.25 7.16848 14.25 7.5V13.75C14.25 14.0815 14.1183 14.3995 13.8839 14.6339C13.6495 14.8683 13.3315 15 13 15C12.6685 15 12.3505 14.8683 12.1161 14.6339C11.8817 14.3995 11.75 14.0815 11.75 13.75V7.5C11.75 7.16848 11.8817 6.85054 12.1161 6.61612C12.3505 6.3817 12.6685 6.25 13 6.25ZM13 18.75C12.6685 18.75 12.3505 18.6183 12.1161 18.3839C11.8817 18.1495 11.75 17.8315 11.75 17.5C11.75 17.1685 11.8817 16.8505 12.1161 16.6161C12.3505 16.3817 12.6685 16.25 13 16.25C13.3315 16.25 13.6495 16.3817 13.8839 16.6161C14.1183 16.8505 14.25 17.1685 14.25 17.5C14.25 17.8315 14.1183 18.1495 13.8839 18.3839C13.6495 18.6183 13.3315 18.75 13 18.75Z" fill="#FF8C00"/>
    </svg>
  )
}

function LowSeverityIcon() {
  return (
    <svg width="22" height="27" viewBox="0 0 22 27" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M11 8.50007V13.5001M11 18.5001H11.0125M21 14.7501C21 21.0001 16.625 24.1251 11.425 25.9376C11.1527 26.0298 10.8569 26.0254 10.5875 25.9251C5.375 24.1251 1 21.0001 1 14.7501V6.00007C1 5.66855 1.1317 5.35061 1.36612 5.11619C1.60054 4.88177 1.91848 4.75007 2.25 4.75007C4.75 4.75007 7.875 3.25007 10.05 1.35007C10.3148 1.12382 10.6517 0.999512 11 0.999512C11.3483 0.999512 11.6852 1.12382 11.95 1.35007C14.1375 3.26257 17.25 4.75007 19.75 4.75007C20.0815 4.75007 20.3995 4.88177 20.6339 5.11619C20.8683 5.35061 21 5.66855 21 6.00007V14.7501Z" stroke="#E3C800" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  )
}

export default function AlertCard({ id, camera_num, floor, severity, time_ago, frame }: AlertCardProps) {
  const { textColor, bgColor, borderColor, width, Icon } = severityConfig[severity]
  const { setSelectedAlert } = useAlert()

  const handleClick = () => {
    setSelectedAlert({ id, camera_num, floor, severity, time_ago, frame })
  }

  return (
    <div className="w-[257px] h-[67px] bg-white rounded-[2px] border border-black border-opacity-10 flex items-center p-3 shadow-sm"
      onClick={handleClick}
    >
      <div className="mr-3 flex items-center justify-center">
        <Icon />
      </div>
      <div className="flex-grow">
        <div className="flex justify-between items-center">
          <h3 className="text-black text-[14px] font-bold">{floor}</h3>
          <span className="text-xs text-black text-opacity-50">{time_ago}</span>
        </div>
        <div className="flex items-center space-x-2 mt-1">
          <div className="flex items-center justify-center w-[35px] h-[18px] border border-black border-opacity-50 rounded">
          <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g opacity="0.5">
          <path d="M10.4583 3.4171H9.10638L8.44162 2.42021C8.40601 2.36683 8.35778 2.32306 8.3012 2.29277C8.24463 2.26249 8.18146 2.24662 8.11729 2.24658H4.99592C4.93175 2.24662 4.86858 2.26249 4.81201 2.29277C4.75543 2.32306 4.7072 2.36683 4.67159 2.42021L4.00635 3.4171H2.65489C2.34445 3.4171 2.04672 3.54042 1.82721 3.75993C1.6077 3.97945 1.48438 4.27717 1.48438 4.58761V10.05C1.48438 10.3605 1.6077 10.6582 1.82721 10.8777C2.04672 11.0972 2.34445 11.2205 2.65489 11.2205H10.4583C10.7688 11.2205 11.0665 11.0972 11.286 10.8777C11.5055 10.6582 11.6288 10.3605 11.6288 10.05V4.58761C11.6288 4.27717 11.5055 3.97945 11.286 3.75993C11.0665 3.54042 10.7688 3.4171 10.4583 3.4171ZM10.8485 10.05C10.8485 10.1535 10.8074 10.2527 10.7342 10.3259C10.661 10.3991 10.5618 10.4402 10.4583 10.4402H2.65489C2.55141 10.4402 2.45217 10.3991 2.379 10.3259C2.30583 10.2527 2.26472 10.1535 2.26472 10.05V4.58761C2.26472 4.48413 2.30583 4.38489 2.379 4.31172C2.45217 4.23855 2.55141 4.19744 2.65489 4.19744H4.21558C4.27983 4.19748 4.3431 4.18165 4.39976 4.15137C4.45643 4.12108 4.50473 4.07726 4.54039 4.02381L5.20466 3.02693H7.90806L8.57282 4.02381C8.60848 4.07726 8.65678 4.12108 8.71345 4.15137C8.77011 4.18165 8.83338 4.19748 8.89763 4.19744H10.4583C10.5618 4.19744 10.661 4.23855 10.7342 4.31172C10.8074 4.38489 10.8485 4.48413 10.8485 4.58761V10.05ZM6.5566 4.97778C6.13218 4.97778 5.71728 5.10364 5.36438 5.33944C5.01148 5.57524 4.73643 5.91039 4.57401 6.30251C4.41159 6.69463 4.36909 7.12611 4.4519 7.54238C4.5347 7.95865 4.73908 8.34102 5.03919 8.64114C5.33931 8.94125 5.72168 9.14563 6.13795 9.22844C6.55422 9.31124 6.9857 9.26874 7.37782 9.10632C7.76994 8.9439 8.10509 8.66885 8.34089 8.31595C8.57669 7.96305 8.70255 7.54815 8.70255 7.12373C8.7019 6.55478 8.47561 6.00933 8.0733 5.60703C7.671 5.20472 7.12555 4.97843 6.5566 4.97778ZM6.5566 8.48933C6.28651 8.48933 6.02249 8.40923 5.79792 8.25918C5.57335 8.10913 5.39831 7.89585 5.29495 7.64632C5.1916 7.39679 5.16455 7.12221 5.21724 6.85731C5.26994 6.59241 5.4 6.34908 5.59098 6.1581C5.78196 5.96712 6.02529 5.83706 6.29019 5.78437C6.55509 5.73167 6.82967 5.75872 7.0792 5.86208C7.32873 5.96543 7.54201 6.14047 7.69206 6.36504C7.84211 6.58961 7.9222 6.85364 7.9222 7.12373C7.9222 7.48591 7.77833 7.83325 7.52223 8.08935C7.26613 8.34545 6.91878 8.48933 6.5566 8.48933Z" fill="black"/>
          </g>
          </svg>

            <span className="text-[12px] text-black text-opacity-50 ml-1">{camera_num}</span>
          </div>
          <span className={`text-[12px] font-normal ${textColor} ${bgColor} ${borderColor} ${width} h-[18px] border px-1 rounded flex items-center justify-center`}>
            {severity}
          </span>
        </div>
      </div>
    </div>
  )
}